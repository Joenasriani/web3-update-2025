<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 4D Tesseract Simulation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
        }
        #container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 24px;
            max-width: 900px;
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        #simulation-panel {
            flex: 2;
            min-width: 400px;
        }
        #controls-panel {
            flex: 1;
            min-width: 250px;
        }
        h1 {
            width: 100%;
            text-align: center;
            color: #0d1117;
            border-bottom: 1px solid #d0d7de;
            padding-bottom: 10px;
            margin-top: 0;
        }
        p {
            line-height: 1.6;
            font-size: 16px;
            color: #57606a;
            width: 100%;
        }
        canvas {
            display: block;
            width: 100%;
            height: auto;
            aspect-ratio: 1 / 1;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
        }
      .slider-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #24292f;
        }
        input[type="range"] {
            width: 100%;
            cursor: pointer;
        }
        #reset-button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            background-color: #2c974b;
            border: 1px solid rgba(27, 31, 36, 0.15);
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #reset-button:hover {
            background-color: #278742;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>Interactive 4D Tesseract Simulation</h1>
        <p>
            This interactive visualization presents a 3D projection of a 4D hypercube, also known as a tesseract. In four-dimensional space, rotation occurs around a plane, not an axis. This gives a 4D object six fundamental planes of rotation. Use the sliders to rotate the tesseract through each of these planes.
            <br><br>
            Notice how rotations involving the fourth dimension (the 'w' axis) cause the 3D projection to morph and appear to turn inside-out. This is analogous to how the 2D shadow of a 3D cube deforms as it rotates in 3D space.
        </p>
        <div id="simulation-panel">
            <canvas id="tesseractCanvas" width="500" height="500"></canvas>
        </div>
        <div id="controls-panel">
            <div class="slider-group">
                <label for="xy-slider">XY Rotation</label>
                <input type="range" id="xy-slider" min="-3.14" max="3.14" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label for="xz-slider">XZ Rotation</label>
                <input type="range" id="xz-slider" min="-3.14" max="3.14" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label for="yz-slider">YZ Rotation</label>
                <input type="range" id="yz-slider" min="-3.14" max="3.14" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label for="xw-slider">XW Rotation</label>
                <input type="range" id="xw-slider" min="-3.14" max="3.14" step="0.01" value="0">
            </div>
            <div class="slider-group">
                <label for="yw-slider">YW Rotation</label>
                <input type="range" id="yw-slider" min="-3.14" max="3.14" step="0.01" value="0">
            </div>
            <div class="slider-group">
                <label for="zw-slider">ZW Rotation</label>
                <input type="range" id="zw-slider" min="-3.14" max="3.14" step="0.01" value="0">
            </div>
            <button id="reset-button">Reset Rotations</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('tesseractCanvas');
        const ctx = canvas.getContext('2d');
        const size = Math.min(canvas.width, canvas.height);
        
        // Tesseract vertices in 4D space
        const points =;
        for (let i = 0; i < 16; i++) {
            points.push([
                (i & 1)? 1 : -1,
                (i & 2)? 1 : -1,
                (i & 4)? 1 : -1,
                (i & 8)? 1 : -1
            ]);
        }

        // Edges connecting the vertices
        const edges =;
        for (let i = 0; i < 16; i++) {
            for (let j = i + 1; j < 16; j++) {
                let diff = 0;
                for (let k = 0; k < 4; k++) {
                    if (points[i][k]!== points[j][k]) {
                        diff++;
                    }
                }
                if (diff === 1) {
                    edges.push([i, j]);
                }
            }
        }

        let angles = { xy: 0.2, xz: 0.2, yz: 0.2, xw: 0, yw: 0, zw: 0 };

        const sliders = {
            xy: document.getElementById('xy-slider'),
            xz: document.getElementById('xz-slider'),
            yz: document.getElementById('yz-slider'),
            xw: document.getElementById('xw-slider'),
            yw: document.getElementById('yw-slider'),
            zw: document.getElementById('zw-slider')
        };

        const resetButton = document.getElementById('reset-button');

        function multiplyMatrix(matrix, point) {
            const result = ;
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    result[i] += matrix[i][j] * point[j];
                }
            }
            return result;
        }

        function getRotationMatrix(plane, angle) {
            const c = Math.cos(angle);
            const s = Math.sin(angle);
            const id = ,
                ,
                ,
                ;

            switch (plane) {
                case 'xy': id = c; id = -s; id = s; id = c; break;
                case 'xz': id = c; id[span_0](start_span)[span_0](end_span) = -s; id[span_1](start_span)[span_1](end_span) = s; id[span_2](start_span)[span_2](end_span)[span_3](start_span)[span_3](end_span) = c; break;
                case 'yz': id = c; id[span_4](start_span)[span_4](end_span) = -s; id[span_5](start_span)[span_5](end_span) = s; id[span_6](start_span)[span_6](end_span)[span_7](start_span)[span_7](end_span) = c; break;
                case 'xw': id = c; id[span_13](start_span)[span_13](end_span) = -s; id[span_14](start_span)[span_14](end_span) = s; id[span_15](start_span)[span_15](end_span)[span_16](start_span)[span_16](end_span) = c; break;
                case 'yw': id = c; id[span_17](start_span)[span_17](end_span) = -s; id[span_18](start_span)[span_18](end_span) = s; id[span_19](start_span)[span_19](end_span)[span_20](start_span)[span_20](end_span) = c; break;
                case 'zw': id[span_8](start_span)[span_8](end_span)[span_9](start_span)[span_9](end_span) = c; id[span_10](start_span)[span_10](end_span)[span_21](start_span)[span_21](end_span) = -s; id[span_11](start_span)[span_11](end_span)[span_22](start_span)[span_22](end_span) = s; id[span_23](start_span)[span_23](end_span)[span_24](start_span)[span_24](end_span) = c; break;
            }
            return id;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#0d1117';
            ctx.lineWidth = 1.5;

            const projectedPoints =;

            const rotationOrder = ['xy', 'xz', 'yz', 'xw', 'yw', 'zw'];

            for (const point of points) {
                let rotatedPoint = [...point];

                for (const plane of rotationOrder) {
                    if (angles[plane]!== 0) {
                        const matrix = getRotationMatrix(plane, angles[plane]);
                        rotatedPoint = multiplyMatrix(matrix, rotatedPoint);
                    }
                }

                // Project 4D to 3D
                const w = rotatedPoint[span_25](start_span)[span_25](end_span);
                const distance = 4;
                const perspectiveW = 1 / (distance - w);
                const p3d = {
                    x: rotatedPoint * perspectiveW,
                    y: rotatedPoint * perspectiveW,
                    z: rotatedPoint[span_12](start_span)[span_12](end_span) * perspectiveW
                };

                // Project 3D to 2D
                const fov = 250;
                const scale = fov / (fov + p3d.z);
                const p2d = {
                    x: p3d.x * scale * size * 0.2 + canvas.width / 2,
                    y: p3d.y * scale * size * 0.2 + canvas.height / 2
                };
                projectedPoints.push(p2d);
            }

            for (const edge of edges) {
                const p1 = projectedPoints[edge];
                const p2 = projectedPoints[edge];
                ctx.beginPath();
                ctx.moveTo(p1.x, p1.y);
                ctx.lineTo(p2.x, p2.y);
                ctx.stroke();
            }
        }

        function updateAngles() {
            for (const key in sliders) {
                angles[key] = parseFloat(sliders[key].value);
            }
            draw();
        }

        for (const key in sliders) {
            sliders[key].addEventListener('input', updateAngles);
        }

        resetButton.addEventListener('click', () => {
            for (const key in sliders) {
                sliders[key].value = 0;
            }
            // Set a slight default rotation for better initial view
            sliders['xy'].value = 0.2;
            sliders['xz'].value = 0.2;
            sliders['yz'].value = 0.2;
            updateAngles();
        });

        // Initial draw
        updateAngles();
    </script>
</body>
</html>
